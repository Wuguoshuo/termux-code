# Skill 4: 创作协作文档

> 创建协作文档，明确 AI 和用户的分工
>
> 让用户清楚知道需要配合什么，AI 知道等待什么

---

## 触发时机

1. Skill 3 确认章节方案后
2. 需要用户配合提供内容时
3. 涉及复杂设定需要用户确认时

---

## 核心目的

**为什么需要协作文档？**

- 明确分工：AI 负责 / 用户负责
- 避免混乱：用户不知道要做什么
- 提升效率：并行工作，用户准备时 AI 处理其他
- 可追踪：知道哪些待办事项

**协作文档位置**: `_collab_docs/`

---

## 协作文档类型

### 1. 章节协作文档

**触发**: 写新章节，需要用户提供特定内容

**文档名**: `第X章-协作.md`

**内容模板**:
```markdown
# 第 X 章 - 协作文档

## 章节信息
- **章节标题**: [标题]
- **对应方案**: [Skill 3 方案 X]
- **预计字数**: [字数]
- **预计完成时间**: [时间]

---

## AI 负责

### 任务 1: [任务名称]
- 描述: [具体说明]
- 输出: [AI 将生成的内容]
- 完成状态: [✅ 已完成 / ⏳ 进行中]

### 任务 2: [任务名称]
[同上]

### 任务 3: [任务名称]
[同上]

---

## 用户负责

### 任务 1: [任务名称]
- 描述: [需要用户提供的内容]
- 具体要求: [格式、字数、示例等]
- 提供方式: [直接填写在本文档 / 另外发送]
- 完成状态: [⬜ 未开始 / ⏳ 进行中 / ✅ 已完成]

### 任务 2: [任务名称]
[同上]

### 任务 3: [任务名称]
[同上]

---

## 分工说明

- AI 将在用户完成任务 1 后开始任务 A
- AI 将在用户完成任务 2 后开始任务 B
- 用户可以随时更新完成状态

---

## 进度跟踪

**开始时间**: [日期时间]
**当前状态**: [等待用户 / AI 处理中 / 用户处理中]
**预计完成**: [日期时间]

---

## 备注
[其他说明]
```

---

### 2. 人物关系协作文档

**触发**: 章节涉及多个人物，需要理清关系

**文档名**: `人物关系表.md`

**内容模板**:
```markdown
# 人物关系表

## 主角
- **姓名**: [主角名]
- **当前状态**: [年龄/身份/能力等级]
- **当前目标**: [短期目标]
- **核心动机**: [长期动机]
- **性格特点**: [描述]
- **与其他人物关系**:
  - [配角A]: [关系]
  - [配角B]: [关系]
  - [反派]: [冲突关系]

---

## 配角

### 配角 1
- **姓名**: [姓名]
- **与主角关系**: [朋友/敌人/导师等]
- **性格特点**: [描述]
- **当前状态**: [描述]
- **在故事中的作用**: [作用]

### 配角 2
[同上]

### 配角 3
[同上]

---

## 反派
- **姓名**: [反派名]
- **与主角冲突**: [冲突描述]
- **动机**: [为什么和主角对立]
- **当前状态**: [描述]
- **在故事中的作用**: [作用]

---

## 关系图

```
       [配角A]
         |
[主角] —— [反派]
         |
       [配角B]
```

---

## 待更新事项

- [ ] 需要用户确认的新人物
- [ ] 需要修改的人物关系
- [ ] 需要补充的人物设定

---

**最后更新**: [日期]
```

---

### 3. 世界观设定协作文档

**触发**: 涉及复杂世界观设定，需要用户确认细节

**文档名**: `世界观设定-协作.md`

**内容模板**:
```markdown
# 世界观设定 - 协作文档

## 设定概述
- **世界观名称**: [世界观名]
- **基础规则**: [核心规则]

---

## AI 负责（基于设定文档）
- [ ] 整理现有设定
- [ ] 识别逻辑漏洞
- [ ] 提供修改建议
- [ ] 检查前后一致性

---

## 用户负责

### 需要确认的规则
- [ ] 规则 1: [描述] - 用户确认: [ ]
- [ ] 规则 2: [描述] - 用户确认: [ ]
- [ ] 规则 3: [描述] - 用户确认: [ ]

### 需要补充的设定
- [ ] 设定 1: [描述] - 用户填写: [ ]
- [ ] 设定 2: [描述] - 用户填写: [ ]

---

## 待办事项

- [ ] 用户确认所有规则
- [ ] AI 生成世界观说明文档
- [ ] 保存到 `_briefs/` 或 `_knowledge_base/`

---

## 进度
- **开始时间**: [日期]
- **当前阶段**: [确认中 / 整理中 / 完成]
- **预计完成**: [日期]

---

**最后更新**: [日期]
```

---

### 4. 待确认事项清单

**触发**: 有多个小问题需要用户确认

**文档名**: `待确认事项.md`

**内容模板**:
```markdown
# 待确认事项清单

## 章节 X 相关

### 事项 1: [标题]
- **问题**: [需要确认的内容]
- **选项 A**: [选项描述]
- **选项 B**: [选项描述]
- **选项 C**: [选项描述]
- **用户选择**: [待填写]

### 事项 2: [标题]
[同上]

### 事项 3: [标题]
[同上]

---

## 人物设定相关

### 事项 1: [标题]
[同上]

---

## 世界观相关

### 事项 1: [标题]
[同上]

---

## 优先级

- **高优先级**: [列出高优先级事项]
- **中优先级**: [列出中优先级事项]
- **低优先级**: [列出低优先级事项]

---

## 进度
- **待确认**: [数量] 个事项
- **已确认**: [数量] 个事项
- **待处理**: [数量] 个事项

---

**最后更新**: [日期]
```

---

## 工作流程

### Step 1: 判断是否需要协作

**Think Aloud 示例**:
```
用户确认选择方案 2...

我思考：
- 这个方案是否需要用户配合？
- 方案涉及：时间机器设定、新人物出场
- 可能需要：
  - 用户确认时间机器的具体规则
  - 用户提供新人物的基本设定
  - 用户确认新人物与主角的关系

我的计划：
1. 判断是否需要协作文档
2. 如需要，创建 `_collab_docs/` 协作文档
3. 明确 AI 和用户分工
4. 等待用户完成其任务
5. 用户完成后继续写作
```

**判断标准**:
- ✅ 需要协作：用户需要提供特定内容（设定/情节/对话）
- ❌ 不需要协作：AI 可以完全自主完成

---

### Step 2: 创建协作文档

**创建步骤**:
1. 选择文档类型（章节协作 / 人物关系 / 世界观 / 待确认事项）
2. 使用对应的模板
3. 填写已知信息
4. 标注 AI 负责和用户负责的任务
5. 保存到 `_collab_docs/`

---

### Step 3: 等待用户完成

**AI 行为**:
- 创建协作文档后，**停止**
- 等待用户完成其负责的任务
- 不假设或代填用户内容

**用户行为**:
- 在协作文档中填写内容
- 更新完成状态
- 通知 AI 可以继续

---

### Step 4: 继续执行

**触发**: 用户通知已完成其任务

**AI 行为**:
1. 读取协作文档，查看用户填写的任务
2. 检查用户提供的内容是否完整
3. 如有疑问，向用户确认
4. 继续执行 AI 负责的任务
5. 完成后进入 Skill 7（写作）或继续当前工作

---

## 特殊情况处理

### 情况 1: 用户部分完成任务

**处理**:
- 检查哪些任务已完成
- 检查哪些任务未完成
- AI 先处理依赖已完成的任务
- 提醒用户未完成任务

**示例**:
```
协作文档中有任务 1、2、3

用户完成任务 1、2，但任务 3 未完成

AI 处理：
- 继续处理依赖任务 1、2 的部分
- 提醒用户："您还需要完成任务 3"
- 不执行依赖任务 3 的部分
```

### 情况 2: 用户要求修改协作文档

**处理**:
- 读取现有协作文档
- 理解用户修改要求
- 更新协作文档
- 重新确定分工

### 情况 3: 协作不再需要

**处理**:
- 用户明确表示不需要协作
- 删除或标注协作文档为"已废弃"
- 直接进入 Skill 7（写作）

---

## 质量检查清单

创建协作文档前，自检：

- [ ] 分工明确？（AI 负责 vs 用户负责）
- [ ] 用户任务描述清晰？
- [ ] 用户任务要求明确（格式/字数）？
- [ ] AI 任务描述清晰？
- [ ] 优先级明确（如有多个任务）？
- [ ] 进度跟踪合理？

---

## 常见错误避免

❌ **不要这样做**:
- 分工不明确，不知道谁负责什么
- 用户任务描述模糊，不知道要做什么
- 不等待用户完成就直接继续
- 假设用户会完成某任务而代填

✅ **应该这样做**:
- 明确分工（AI 负责 / 用户负责）
- 用户任务清晰描述（格式、示例、要求）
- 等待用户完成其任务
- Think Aloud 说明协作计划

---

## Think Aloud 要求

**执行本 Skill 时，必须透明化思考**：

```
示例：

用户确认选择方案 2，涉及时间机器设定...

我思考：
- 需要确认时间机器的具体规则
- 需要确认是否需要用户提供时间机器设定的细节

我的计划：
1. 判断：是否需要协作文档？
   - 方案涉及：时间机器（需要规则确认）
   - 判断：需要协作
2. 创建协作文档：`_collab_docs/时间机器设定-协作.md`
3. 明确分工：
   - AI 负责：整理现有设定，识别规则漏洞
   - 用户负责：提供时间机器的具体规则和设定
4. 等待用户完成任务
5. 用户完成后继续写作

创建协作文档...
```

---

## 输入输出总结

**输入**:
- 章节方案（Skill 3 输出）
- 需要协作的内容类型

**输出**:
- 协作文档（`_collab_docs/协作.md`）
- 分工说明
- 等待用户完成

**下一步**:
- 用户完成协作任务 → Skill 7（写作）

---

## 文件命名规范

**格式**: 根据类型命名

**示例**:
- 章节协作：`第X章-协作.md`
- 人物关系：`人物关系表.md`
- 世界观：`世界观设定-协作.md`
- 待确认：`待确认事项.md`

**路径**: `projects/web/novel-writing/_collab_docs/`

---

## 与其他 Skills 的关系

- **Skill 3** → **Skill 4**: 确认方案后，判断是否需要协作
- **Skill 4** → **Skill 7**: 用户完成协作后，开始写作
- **Skill 1** → **Skill 4**: 基于设定创建协作文档

---

**最后更新**: 2024-12-26
**版本**: 第二阶段
