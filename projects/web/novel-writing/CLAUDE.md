# 小说写作工作区 - CLAUDE.md

> 这是一个结构化的小说写作系统，基于 AI 协作工作流设计

## 工作区说明

**工作区类型**: 小说创作工作区

**核心原则**:
1. ✅ **绝不编造数据** - 所有情节、人物、设定必须有依据
2. ✅ **Think Aloud** - 所有决策都要说明思考过程，让用户掌控流程
3. ✅ **用户确认** - 重要决策（章节方案、情节转折）必须等待用户确认
4. ✅ **先讨论再写作** - 核心原则：不直接写，先讨论！
5. ✅ **使用真实素材** - 用真实经历、观点、案例降 AI 味

---

## 任务类型判断（第二层）

收到写作需求时，先判断任务类型：

| 类型 | 描述 | 触发流程 |
|------|------|----------|
| **A. 新小说项目** | 无现有设定，需要从头开始 | Skill 1 → Skill 2 |
| **B. 新章节** | 有完整设定，需要写新章节 | Skill 3 → Skill 7 → Skill 8 |
| **C. 修改章节** | 已有草稿，需要修改 | 读取原文 → Skill 7（修改）→ Skill 8 |
| **D. 审校文章** | 已完成章节，需要降 AI 味 | Skill 8 |
| **E. 快速咨询** | 关于设定、技术、风格的问题 | 直接回答或 Skill 2 |

---

## 当前可用 Skills（第二阶段）

### ✅ 已实现 Skills
- **Skill 1**: `skills/01-save-outline.md` - 需求理解与大纲保存
- **Skill 2**: `skills/02-research-knowledge.md` - 信息搜索与知识管理
- **Skill 3**: `skills/03-discuss-chapter.md` - 选题与章节讨论
- **Skill 4**: `skills/04-create-collab-doc.md` - 创作协作文档
- **Skill 5**: `skills/05-learn-style.md` - 学习作者风格
- **Skill 6**: `skills/06-use-personal-materials.md` - 使用个人素材库
- **Skill 7**: `skills/07-write-draft.md` - 创作章节初稿
- **Skill 8**: `skills/08-three-pass-review.md` - 三遍审校（降 AI 味）

### 🚧 待实现 Skills（第三阶段）
- **Skill 9**: 章节配图与发布

---

## 完整写作流程（第二阶段版本）

### 流程图

```
用户需求
   ↓
判断任务类型
   ↓
   ├─ A. 新小说项目
   │    ↓
   │    Skill 1: 需求理解与大纲保存
   │    ↓
   │    是否需要知识调研？
   │    ├─ 是 → Skill 2: 信息搜索与知识管理
   │    └─ 否 → 进入 B 流程
   │    ↓
   │    进入 B 流程
   │
   ├─ B. 新章节 ⭐
   │    ↓
   │    判断是否需要协作？
   │    ├─ 需要协作 → Skill 4: 创作协作文档
   │    │    ↓
   │    │    等待用户完成协作任务
   │    │    ↓
   │    │    ↓
   │    │    Skill 3: 讨论章节方案
   │    │    ↓
   │    │    用户确认方案
   │    │    ↓
   │    │    Skill 5: 学习作者风格（如需要）
   │    │    ↓
   │    │    Skill 6: 使用个人素材库
   │    │    ↓
   │    │    Skill 7: 创作初稿
   │    │    ↓
   │    │    Skill 8: 三遍审校
   │    │    ↓
   │    │    保存到 drafts/ 或 published/
   │    │
   │    └─ 不需要协作 → Skill 3: 讨论章节方案
   │         ↓
   │         用户确认方案
   │         ↓
   │         Skill 5: 学习作者风格（如需要）
   │         ↓
   │         Skill 6: 使用个人素材库
   │         ↓
   │         Skill 7: 创作初稿
   │         ↓
   │         Skill 8: 三遍审校
   │         ↓
   │         保存到 drafts/ 或 published/
   │
   ├─ C. 修改章节
   │    ↓
   │    读取原文
   │    ↓
   │    Skill 6: 使用个人素材库
   │    ↓
   │    Skill 7: 修改内容
   │    ↓
   │    Skill 8: 审校
   │
   ├─ D. 审校文章
   │    ↓
   │    Skill 6: 使用个人素材库（增强真实感）
   │    ↓
   │    Skill 8: 三遍审校
   │
   └─ E. 快速咨询
        ↓
        直接回答或 Skill 2
```

---

## 核心工作流程详解

### Skill 1: 需求理解与大纲保存

**触发时机**: 用户开始新小说项目

**工作步骤**:
1. 收集用户需求（类型、题材、风格等）
2. 整理成设定文档
3. 保存到 `_briefs/` 文件夹
4. 文件命名：`小说名-设定brief.md`

**核心内容**:
- 基本信息（小说名称、类型、风格、目标读者）
- 世界观设定（时间背景、地点、世界规则）
- 主要人物设定（主角、配角、反派）
- 核心冲突（主要矛盾、外部冲突、内部冲突）
- 写作规划（预计字数、章节规划）

---

### Skill 2: 信息搜索与知识管理

**触发时机**: 涉及新概念、新技术、新方法时

**工作步骤**:
1. 生成搜索关键词
2. 多渠道搜索（科技媒体、社区论坛、官方文档）
3. 整理和验证信息
4. 保存到 `_knowledge_base/` 文件夹
5. 文件命名：`主题-时间.md`

**核心原则**:
- 必须搜索验证 > 一切（AI 训练数据可能过时）
- 信息来源优先级（权威科技媒体 > 社区论坛 > 知乎/百度 2025 年之前）

---

**触发时机**: 用户要求写新章节

**工作步骤**:
1. **先不写！提供 3-4 个情节方案**
2. 每个方案包含：
   - 章节标题（吸引人的）
   - 核心情节（3-5 个主要事件）
   - 关键冲突和转折
   - 人物发展
   - 预计字数
   - 工作量评级（☆）
   - 优势和劣势

3. **等待用户选择** - 不要假设或自作主张

4. 用户确认后，进入 Skill 7

**输出格式**:
```markdown
## 方案 1：[标题]

### 核心情节
1. ...
2. ...
3. ...

### 关键事件
- 事件 1
- 事件 2

### 人物发展
- [角色A]：...
- [角色B]：...

### 冲突与转折
- 主要冲突：...
- 转折点：...

### 工作量评估
评级：★★★☆☆
预计字数：2000-2500 字

### 优势与劣势
- ✅ 优势：...
- ❌ 劣势：...

---

## 方案 2：...
```

---

### Skill 4: 创作协作文档

**触发时机**: 章节需要用户配合提供内容时

**工作步骤**:
1. 判断是否需要协作
2. 创建协作文档到 `_collab_docs/`
3. 明确分工（AI 负责 / 用户负责）
4. 等待用户完成其任务

**协作文档类型**:
- 章节协作文档（情节、对话分工）
- 人物关系协作文档（人物设定）
- 世界观设定协作文档（规则确认）
- 待确认事项清单（多个小问题）

---

### Skill 5: 学习作者风格

**触发时机**: 项目初始化时、用户更新风格指南时、每完成 5-10 章后

**工作步骤**:
1. 读取风格指南（`写作参考/风格指南.md`）
2. 读取历史作品至少 2-3 篇
3. 提取风格特征（开头方式、结构偏好、语言特征、金句风格）
4. 保存到 `materials/风格库/`

**风格特征**:
- 开头方式（直接进入、悬念开场、回忆开场）
- 叙事视角（第一人称/第三人称、多视角）
- 语言特色（简洁有力、华丽辞藻、幽默风趣）
- 节奏控制（快节奏、慢节奏、快慢结合）
- 对话风格（口语化、文学化、网络用语）

---

### Skill 6: 使用个人素材库（⭐ 降 AI 味核心）

**触发时机**: 写作前、写作中、审校时

**工作步骤**:
1. 判断使用场景（情感描写、观点表达、对话设计、结尾升华）
2. 方法 A：Grep 搜索原始数据（推荐）
3. 方法 B：查看已提炼素材（主题索引）
4. 整理和使用素材
5. 自然融入章节

**使用原则**:
- 所有素材都是真实的
- 可以改写成长文逻辑
- 自然融入，不要生硬插入

---

### Skill 7: 创作章节初稿

**触发时机**: 用户确认章节方案后

**工作步骤**:
1. **基于讨论确认的方案** - 不要偏离
2. **保持"故事驱动 + 人物成长"调性**
3. **加入具体场景和细节**
4. **自然融入作者的视角**

**写作原则**:
- ✅ 开头吸引人（3 秒法则）
- ✅ 情节有冲突和转折
- ✅ 人物有成长和变化
- ✅ 场景描写具体生动
- ✅ 对话符合人物性格
- ✅ 节奏张弛有度

**输出**:
- 保存到 `drafts/` 文件夹
- 文件命名：`小说名-第X章-标题.md`
- 包含完整的章节内容（不需要完美，重点是写出来）

**文件模板**:
```markdown
# 第 X 章：[标题]

## 开场
[具体场景引入...]

## 发展
[情节展开...]

## 高潮
[冲突和转折...]

## 结尾
[本章节收尾...]

---

**字数统计**: [统计]
**创作时间**: [时间]
**备注**: [用户反馈等]
```

---

### Skill 8: 三遍审校（⭐ 最关键）

**触发时机**: 完成章节初稿后

**核心目标**: 系统化降低 AI 检测率，增加"人味"

**工作步骤**:

#### 第一遍：内容审校（逻辑、事实、结构）

检查项：
- ✅ 逻辑清晰？（前后无矛盾）
- ✅ 人物行为合理？（符合人设）
- ✅ 情节连贯？（无跳跃）
- ✅ 无硬伤？（时间、地点、常识）
- ✅ 世界观一致？（不违反设定）

#### 第二遍：风格审校（降 AI 味核心）

检查项：
- ❌ 删除套话：
  - "在当今时代"
  - "综上所述"
  - "值得注意的是"
  - "经过充分思考"

- ❌ 拆解 AI 句式：
  - "不是…而是…"（连续出现）
  - "不仅…而且…"（滥用）
  - "一方面…另一方面…"（机械）

- ❌ 替换书面词汇：
  - "显著提升" → 具体数字/效果
  - "充分利用" → "用好"
  - "进行操作" → 直接用动词
  - "产生深远影响" → "改变了..."

- ✅ 改成口语化：
  - "进行分析" → "分析"
  - "采取行动" → "动手"
  - "进行思考" → "想想"

- ✅ 加入真实细节：
  - 抽象表达 → 具体场景
  - 概括描述 → 具体对话
  - 空洞赞美 → 具体行为

- ✅ 加入个人态度：
  - 中立客观 → 明确观点
  - 模糊表达 → 直接态度

**常见改写示例**:
```
❌ 原文：经过充分的思考和深入的探讨，我们可以得出一个结论...
✅ 改写：想了很久，终于明白了...

❌ 原文：这个决定具有极其重要的意义，将对未来的发展产生深远的影响...
✅ 改写：这个决定改变了所有...

❌ 原文：他感到一种难以言喻的悲伤涌上心头...
✅ 改写：他心里堵得慌，像有什么东西碎了...
```

#### 第三遍：细节打磨（标点、排版、节奏）

检查项：
- ✅ 句子长度合适？（15-25 字为主，不超过 30 字）
- ✅ 段落不太长？（手机屏幕 3-5 行）
- ✅ 标点自然？（多用句号，少用逗号连接长句）
- ✅ 节奏有变化？（快慢结合，张弛有度）

**操作**:
1. 大声朗读，感受节奏
2. 找出超过 30 字的长句，拆短
3. 调整段落长度（3-5 行）
4. 优化标点符号（句号 > 逗号）

**输出**:
- 审校后的版本（覆盖原文件或另存新版本）
- 审校日志（记录主要修改）

---

## 目录说明

```
novel-writing/
├── _briefs/              # 小说设定和大纲（手动创建）
├── _knowledge_base/     # 知识库（第二阶段）
├── _collab_docs/        # 协作文档（第二阶段）
├── skills/              # Skills 模板
│   ├── 03-discuss-chapter.md  ✅ 已实现
│   ├── 07-write-draft.md      ✅ 已实现
│   └── 08-three-pass-review.md ✅ 已实现
├── materials/           # 个人素材库（手动添加）
│   ├── 原始素材/
│   ├── 经历索引/
│   ├── 观点索引/
│   └── 金句库/
├── drafts/              # 草稿区
├── published/           # 成品区
├── images/              # 配图（第三阶段）
└── _logs/              # 日志
```

---

## 使用示例

### 示例 1：开始新小说
```
用户：我想写一部关于时间旅行的科幻小说
AI: 请先创建设定文档 _briefs/小说名-设定brief.md
     包含：世界观、主角设定、核心冲突、预计字数
```

### 示例 2：写新章节
```
用户：写第3章，主角发现时间机器的真相
AI: [触发 Skill 3] 提供 3 个情节方案供选择...
```

### 示例 3：审校文章
```
用户：帮我审校第3章
AI: [触发 Skill 8] 执行三遍审校...
```

---

## Think Aloud 要求

**每次做决策时，必须说明思考过程**：

✅ **应该这样做**:
```
用户要求写第3章...

我思考：
- 这是"新章节"类型，应该走 B 流程
- 首先需要执行 Skill 3 讨论方案
- 我需要了解前两章的情节，才能合理设计第3章
- 我应该先读取 _briefs/ 设定文档和前两章内容

我的计划：
1. 读取设定文档
2. 读取前两章
3. 执行 Skill 3，提供 3 个情节方案
4. 等待用户选择
```

❌ **不要这样做**:
```
用户要求写第3章...
直接开始写作...（黑盒操作，用户不知道 AI 在做什么）
```

---

## 核心提醒

1. **先讨论再写作** - 这是核心原则，不要跳过
2. **使用真实素材** - 从 `materials/` 中搜索真实经历
3. **三遍审校** - 最关键的一步，必须执行
4. **Think Aloud** - 透明化思考过程
5. **用户确认** - 重要决策必须等待确认

---

## 版本信息

**当前版本**: 第一阶段（基础结构）

**已实现功能**:
- ✅ 目录结构
- ✅ CLAUDE.md 总纲
- ✅ 核心 Skills（3、7、8）
- ✅ 基础素材库框架

**待实现功能**（第二、三阶段）:
- 🚧 Skill 1、2、4、5、6、9
- 🚧 Hooks 自动化
- 🚧 知识库和调研功能
- 🚧 风格学习
- 🚧 进度跟踪

**最后更新**: 2024-12-26
